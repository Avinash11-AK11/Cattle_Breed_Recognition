# Cattle Breed Recognition - ML Model Integration Guide

## Quick Start

### 1. Backend Setup (Already Done)
The FastAPI backend is set up and running at `http://localhost:8000`

### 2. Start the Application

**Terminal 1 - Backend:**
```bash
cd D:\sih\Cattle_Breed_Recognition
.venv\Scripts\python.exe backend/app.py
```

**Terminal 2 - Frontend:**
```bash
cd D:\sih\Cattle_Breed_Recognition
npm run dev
```

### 3. Integrating Your ML Model

#### For TensorFlow Models:
1. Place your trained model file as `backend/model.h5`
2. Install TensorFlow:
   ```bash
   .venv\Scripts\pip.exe install tensorflow==2.13.0
   ```
3. Update the class labels in `backend/app.py` line 67:
   ```python
   breeds = ['Your_Breed_1', 'Your_Breed_2', ...] # Replace with your actual breed names
   ```

#### For PyTorch Models:
1. Place your trained model file as `backend/model.pth`
2. Install PyTorch:
   ```bash
   .venv\Scripts\pip.exe install torch torchvision
   ```
3. Update the prediction logic in `backend/app.py`

#### Model Preprocessing:
Update the image preprocessing in `backend/app.py` (lines 58-60) to match your model's requirements:
```python
image = image.resize((224, 224))  # Adjust size as needed
image_array = np.array(image) / 255.0  # Adjust normalization
image_array = np.expand_dims(image_array, axis=0)  # Add batch dimension
```

### 4. Database Integration

#### Supabase Tables
The backend is already configured to store predictions in Supabase. Create this table in your Supabase dashboard:

```sql
CREATE TABLE predictions (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    breed TEXT NOT NULL,
    confidence REAL NOT NULL,
    user_id TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, now()) NOT NULL
);
```

#### Additional Useful Tables:
```sql
-- Breed Information Table
CREATE TABLE breeds (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    type TEXT NOT NULL, -- 'Cattle' or 'Buffalo'
    origin TEXT,
    characteristics TEXT,
    milk_production TEXT,
    usage TEXT,
    climate_adaptability TEXT,
    image_url TEXT,
    common_regions TEXT[],
    popularity TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, now()) NOT NULL
);

-- User Identifications History
CREATE TABLE user_identifications (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id),
    breed_id BIGINT REFERENCES breeds(id),
    image_url TEXT,
    confidence REAL,
    is_confirmed BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, now()) NOT NULL
);
```

### 5. API Endpoints

#### Available Endpoints:
- `POST /predict` - Upload image and get breed prediction
- `GET /docs` - API documentation (visit http://localhost:8000/docs)

### 6. Frontend Integration

The React frontend is already configured to:
- Upload images to the backend
- Display prediction results
- Store results in local storage
- Show recent identifications

### 7. Testing the Integration

1. Start both servers
2. Open http://localhost:5173
3. Sign in or create an account
4. Navigate to the dashboard
5. Upload an image of cattle/buffalo
6. See the AI prediction results

### 8. Production Deployment

For production deployment:
1. Update CORS settings in `backend/app.py`
2. Use proper environment variables for database connections
3. Deploy backend to a cloud service (Heroku, AWS, etc.)
4. Update frontend API URL to point to your deployed backend

### Current Status:
âœ… Backend API running on port 8000
âœ… Frontend connected to backend
âœ… Supabase database configured
âœ… Mock predictions working
ðŸ”„ Awaiting your ML model integration

### Next Steps:
1. Add your trained model file to the backend directory
2. Install the appropriate ML framework (TensorFlow/PyTorch)
3. Update breed class labels to match your model
4. Test with real images
5. Fine-tune preprocessing if needed
